<section i18n:domain="collective.cart.shopping" id="articles-in-article" tal:condition="viewlet/articles">
  <table>
    <tbody>
      <tr tal:attributes="id item/id" tal:repeat="item viewlet/articles">
        <td class="image">
          <a
            tal:condition="item/url"
            tal:attributes="
              href item/url;
              title item/title">
              <img tal:attributes="
                alt item/description;
                src item/image_url;
                title item/title" />
          </a>
        </td>
        <td class="name">
          <h3>
            <a
              tal:condition="item/url"
              tal:attributes="href item/url"
              tal:content="item/title"
              />
          </h3>
          <p tal:content="item/description" />
        </td>

        <td class="price-and-quantity">
          <section
            id="add-to-cart"
            tal:condition="item/addable_to_cart">
            <form
              method="post"
              tal:attributes="action context/@@plone_context_state/current_base_url"
              tal:condition="not: item/soldout">
              <input
                id="quantity"
                name="quantity"
                value="1"
                type="text"
                tal:attributes="
                  maxlength item/quantity_size;
                  size item/quantity_size"
                />
                &nbsp;&times;&nbsp;
              <span class="gross" tal:content="item/gross" />
              <br />
              <span class="vat" i18n:translate="">
                Including VAT: <span i18n:name="vat" tal:replace="item/vat" /> &#37;
              </span>
              <section
                id="discount"
                tal:condition="item/discount_end">
                <p id="discount-message" i18n:translate="">
                  (Discount valid till <span i18n:name="discount_end" tal:replace="item/discount_end" />)
                </p>
                <p id="normal-price" i18n:translate="">
                  Normal Price: <span i18n:name="normal-price" tal:replace="item/money" />
                </p>
              </section>
              <section class="stock" i18n:translate="">
                Stock: <span i18n:name="stock" tal:replace="item/quantity_max" /> pcs
              </section>
              <section class="buttons">
                <button
                  class="shopping-button update"
                  i18n:domain="collective.cart.core"
                  i18n:translate=""
                  name="form.buttons.AddToCart"
                  tal:attributes="value item/uuid"
                  type="submit"
                  >Add To Cart</button>
              </section>
            </form>
            <p
              class="sold-out"
              i18n:translate=""
              tal:condition="item/soldout">
              Sold Out
            </p>
          </section>
          <section
            id="add-subarticle-to-cart"
            tal:condition="item/subarticle_addable_to_cart">
            <form
              method="post"
              tal:attributes="action context/@@plone_context_state/current_base_url"
              tal:condition="not: item/soldout">
              <select id="subarticle" name="subarticle">
                <option
                  tal:attributes="value sub/uuid"
                  tal:repeat="sub item/subarticles">
                  <span tal:replace="sub/title" />
                  <span tal:replace="sub/gross" />
                </option>
              </select><br />
              <span class="vat" i18n:translate="">
                Including VAT: <span i18n:name="vat" tal:replace="item/vat" /> &#37;
              </span><br />
              <tal:block tal:condition="not: context/@@plone_portal_state/anonymous">
                <input
                  id="quantity"
                  min="1"
                  name="quantity"
                  value="1"
                  type="text"
                  tal:attributes="
                    maxlength item/quantity_size;
                    size item/quantity_size"
                  />
                <span
                  id="pcs"
                  i18n:translate="">pcs</span>
                <button
                  class="shopping-button update"
                  i18n:domain="collective.cart.core"
                  type="submit"
                  name="form.buttons.AddToCart"
                  value="form.buttons.AddToCart"
                  i18n:translate=""
                  >Add To Cart</button>
              </tal:block>
              <section class="please-login" tal:condition="context/@@plone_portal_state/anonymous">
                <p i18n:translate="please-login">
                  You need to log in to add this article to cart. If you have not registered yet, please register first.
                </p>
                <p i18n:domain="plone">
                  <a i18n:translate="" tal:attributes="href string:${context/@@plone_portal_state/portal_url}/login">Log in</a>
                  <a i18n:translate="" tal:attributes="href string:${context/@@plone_portal_state/portal_url}/@@register">Register</a>
                </p>
              </section>
            </form>
            <p
              class="sold-out"
              i18n:translate=""
              tal:condition="item/soldout">
              Sold Out
            </p>
          </section>
        </td>
      </tr>
    </tbody>
  </table>
</section>
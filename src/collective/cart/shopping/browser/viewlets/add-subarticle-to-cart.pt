<section
  i18n:domain="collective.cart.shopping"
  id="add-subarticle-to-cart"
  tal:condition="viewlet/available">
  <form
    method="post"
    tal:attributes="action context/@@plone_context_state/current_base_url"
    tal:condition="not: viewlet/soldout">
    <select id="subarticle" name="subarticle">
      <option
        tal:attributes="value item/uuid"
        tal:repeat="item viewlet/subarticles">
        <span tal:replace="item/title" />
        <span tal:replace="item/gross" />
      </option>
    </select>
    <tal:block tal:condition="not: context/@@plone_portal_state/anonymous">
      <label
        i18n:translate="">Quantity</label>
      <input
        id="quantity"
        name="quantity"
        value="1"
        type="text"
        tal:attributes="
          maxlength viewlet/quantity_size;
          size viewlet/quantity_size"
        />
      <span
        id="pcs"
        i18n:translate="">pcs</span>
      <button
        class="shopping-button update"
        type="submit"
        name="form.buttons.AddToCart"
        value="form.buttons.AddToCart"
        i18n:translate=""
        i18n:domain="collective.cart.core"
        >Add To Cart</button>
    </tal:block>
    <section class="please-login" tal:condition="context/@@plone_portal_state/anonymous">
      <p i18n:translate="please-login">
        You need to log in to add this article to cart. If you have not registered yet, please register first.
      </p>
      <p i18n:domain="plone">
        <a i18n:translate="" tal:attributes="href string:${context/@@plone_portal_state/portal_url}/login">Log in</a>
        <a i18n:translate="" tal:attributes="href string:${context/@@plone_portal_state/portal_url}/@@register">Register</a>
      </p>
    </section>
  </form>
  <p
    class="sold-out"
    i18n:translate=""
    tal:condition="viewlet/soldout">
    Sold Out
  </p>
</section>
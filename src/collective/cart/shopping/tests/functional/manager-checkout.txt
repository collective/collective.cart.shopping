Log in as Manager::

    >>> browser.login(TEST_USER_NAME, TEST_USER_PASSWORD)

Create Shop::

    >>> browser.open('/++add++collective.cart.shopping.Shop')
    >>> browser.getControl(name="form.widgets.IDublinCore.title").value = 'Shöp'
    >>> browser.getControl(name="form.buttons.save").click()

Add Shipping Method::

    >>> browser.open('/shop/shipping-methods/createObject?type_name=ShippingMethod')
    >>> browser.getControl(name="title").value = 'ShippingMethöd1'
    >>> browser.getControl(name="description").value = 'Descriptiön of ShippingMethöd1'
    >>> browser.getControl(name="min_delivery_days").value = '3'
    >>> browser.getControl(name="max_delivery_days").value = '5'
    >>> browser.getControl(name="form.button.save").click()
    >>> 'Shipping fee for one kg' in browser.contents
    True
    >>> '1.0' in browser.contents
    True

Add ArticleContainer::

    >>> browser.open('/shop/++add++collective.cart.shopping.ArticleContainer')
    >>> browser.getControl(name="form.widgets.IDublinCore.title").value = 'Article Container'
    >>> browser.getControl(name="form.buttons.save").click()

Add Article::

    >>> browser.open('/shop/article-container/article-container/++add++collective.cart.core.Article')
    >>> browser.getControl(name="form.widgets.IDublinCore.title").value = 'Ärticle1'
    >>> browser.getControl(name="form.widgets.IDublinCore.description").value = 'Description of Ärticle1'
    >>> browser.getControl(name="form.widgets.ISKU.sku").value = 'SKU1'
    >>> browser.getControl(name="form.widgets.IDiscount.price").value = '12.30'
    >>> browser.getControl(name="form.widgets.ISize.weight").value = '100'
    >>> browser.getControl(name="form.buttons.save").click()

    >>> article1_url = browser.url

Add Stock to Ärticle1::

    >>> browser.open('/shop/article-container/article1/++add++collective.cart.stock.Stock')
    >>> browser.getControl(name="form.widgets.IBasic.title").value = 'Stöck1'
    >>> browser.getControl(name="form.widgets.IBasic.description").value = 'Description of Stöck1'
    >>> browser.getControl(name="form.widgets.stock").value = '100'
    >>> browser.getControl( name="form.widgets.IStockPrice.price").value = '0.0'
    >>> browser.getControl(name="form.buttons.save").click()

    >>> stock1_url = browser.url

Add Ärticle1 to Cart::

    >>> browser.open(article1_url)
    >>> browser.getControl(name="form.buttons.AddToCart").click()

Go to Cart::

    >>> browser.open('/shop/@@cart')

Check Out::

    >>> browser.getControl(name="form.checkout").click()

Fill Billing Info::

    >>> browser.getControl(name="form.billing.widgets.first_name").value = 'Billing First Näme'
    >>> browser.getControl(name="form.billing.widgets.last_name").value = 'Billing Last Näme'
    >>> browser.getControl(name="form.billing.widgets.organization").value = 'Billing Örganization'
    >>> browser.getControl(name="form.billing.widgets.vat").value = 'FI1234567890'
    >>> browser.getControl(name="form.billing.widgets.email").value = 'first.last@email.billing'
    >>> browser.getControl(name="form.billing.widgets.street").value = 'Billing Street Äddress'
    >>> browser.getControl(name="form.billing.widgets.post").value = 'Billing Pöst Cöde'
    >>> browser.getControl(name="form.billing.widgets.city").value = 'Billing €ity'
    >>> browser.getControl(name="form.billing.widgets.phone").value = 'Billing Phöne Number'
    >>> browser.getControl(name="form.billing.buttons.submit").click()

    >>> 'Billing First Näme' in browser.contents
    True
    >>> 'Billing Last Näme' in browser.contents
    True
    >>> 'Billing Örganization' in browser.contents
    True
    >>> 'FI1234567890' in browser.contents
    True
    >>> 'first.last@email.billing' in browser.contents
    True
    >>> 'Billing Street Äddress' in browser.contents
    True
    >>> 'Billing Pöst Cöde' in browser.contents
    True
    >>> 'Billing €ity' in browser.contents
    True
    >>> 'Billing Phöne Number' in browser.contents
    True

Update Billing Info::

    >>> browser.getControl(name="form.billing.widgets.first_name").value = 'New Billing First Näme'
    >>> browser.getControl(name="form.billing.widgets.last_name").value = 'New Billing Last Näme'
    >>> browser.getControl(name="form.billing.widgets.organization").value = 'New Billing Örganization'
    >>> browser.getControl(name="form.billing.widgets.vat").value = 'NEW1234567890'
    >>> browser.getControl(name="form.billing.widgets.email").value = 'first.last@email.newbilling'
    >>> browser.getControl(name="form.billing.widgets.street").value = 'New Billing Street Äddress'
    >>> browser.getControl(name="form.billing.widgets.post").value = 'New Billing Pöst Cöde'
    >>> browser.getControl(name="form.billing.widgets.city").value = 'New Billing €ity'
    >>> browser.getControl(name="form.billing.widgets.phone").value = 'New Billing Phöne Number'
    >>> browser.getControl(name="form.billing.buttons.submit").click()

    >>> 'New Billing First Näme' in browser.contents
    True
    >>> 'New Billing Last Näme' in browser.contents
    True
    >>> 'New Billing Örganization' in browser.contents
    True
    >>> 'NEW1234567890' in browser.contents
    True
    >>> 'first.last@email.newbilling' in browser.contents
    True
    >>> 'New Billing Street Äddress' in browser.contents
    True
    >>> 'New Billing Pöst Cöde' in browser.contents
    True
    >>> 'New Billing €ity' in browser.contents
    True
    >>> 'New Billing Phöne Number' in browser.contents
    True

Update Shipping Info::

    >>> browser.getControl(name="form.shipping.widgets.first_name").value = 'Shipping First Näme'
    >>> browser.getControl(name="form.shipping.widgets.last_name").value = 'Shipping Last Näme'
    >>> browser.getControl(name="form.shipping.widgets.organization").value = 'Shipping Örganization'
    >>> browser.getControl(name="form.shipping.widgets.vat").value = 'SHIPPING1234567890'
    >>> browser.getControl(name="form.shipping.widgets.email").value = 'first.last@email.shipping'
    >>> browser.getControl(name="form.shipping.widgets.street").value = 'Shipping Street Äddress'
    >>> browser.getControl(name="form.shipping.widgets.post").value = 'Shipping Pöst Cöde'
    >>> browser.getControl(name="form.shipping.widgets.city").value = 'Shipping €ity'
    >>> browser.getControl(name="form.shipping.widgets.phone").value = 'Shipping Phöne Number'
    >>> browser.getControl(name="form.shipping.buttons.submit").click()

    >>> 'New Billing First Näme' in browser.contents
    True
    >>> 'New Billing Last Näme' in browser.contents
    True
    >>> 'New Billing Örganization' in browser.contents
    True
    >>> 'NEW1234567890' in browser.contents
    True
    >>> 'first.last@email.newbilling' in browser.contents
    True
    >>> 'New Billing Street Äddress' in browser.contents
    True
    >>> 'New Billing Pöst Cöde' in browser.contents
    True
    >>> 'New Billing €ity' in browser.contents
    True
    >>> 'New Billing Phöne Number' in browser.contents
    True

    >>> 'Shipping First Näme' in browser.contents
    True
    >>> 'Shipping Last Näme' in browser.contents
    True
    >>> 'Shipping Örganization' in browser.contents
    True
    >>> 'SHIPPING1234567890' in browser.contents
    True
    >>> 'first.last@email.shipping' in browser.contents
    True
    >>> 'Shipping Street Äddress' in browser.contents
    True
    >>> 'Shipping Pöst Cöde' in browser.contents
    True
    >>> 'Shipping €ity' in browser.contents
    True
    >>> 'Shipping Phöne Number' in browser.contents
    True

Confirm::

    >>> browser.getControl(name="form.to.confirmation").click()

Confirm the order::

    >>> len(mailhost.messages)
    0

    >>> browser.getControl(name="form.buttons.ConfirmOrder").click()

Check the newest message sent::

    >>> msg = mailhost.messages[-1]
    >>> prink(msg)
    MIME-Version: 1.0
    Content-Type: text/plain; charset="utf-8"
    Content-Transfer-Encoding: quoted-printable
    CC: email@from.address
    Subject: =?utf-8?q?Ordered?=
    To: first.last@email.newbilling
    From: email@from.address
    Date: ...
    <BLANKLINE>
    Thank you for the order.
    <BLANKLINE>
    Order Number: 1
    <BLANKLINE>
    Billing Address
    =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
    =3D=3D=3D
    New Billing First N=C3=A4me New Billing Last N=C3=A4me  New Billing =C3=96r=
    ganization  NEW1234567890
    New Billing Street =C3=84ddress
    New Billing P=C3=B6st C=C3=B6de New Billing =E2=82=ACity
    New Billing Ph=C3=B6ne Number
    first.last@email.newbilling
    <BLANKLINE>
    <BLANKLINE>
    Shipping Address
    =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
    =3D=3D=3D
    Shipping First N=C3=A4me Shipping Last N=C3=A4me  Shipping =C3=96rganizatio=
    n  SHIPPING1234567890
    Shipping Street =C3=84ddress
    Shipping P=C3=B6st C=C3=B6de Shipping =E2=82=ACity
    Shipping Ph=C3=B6ne Number
    first.last@email.shipping
    <BLANKLINE>
    <BLANKLINE>
    Ordered contents
    =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
    =3D=3D=3D
    SKU1: =C3=84rticle1 x 3 =3D 12.30 =E2=82=AC
    <BLANKLINE>
    Shipping Method: ShippingMeth=C3=B6d1  0.10 =E2=82=AC
    <BLANKLINE>
    Total: 12.40 =E2=82=AC
    <BLANKLINE>
    Link to the order: http://nohost/plone/shop/cart-container/1
